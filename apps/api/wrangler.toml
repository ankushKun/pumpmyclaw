name = "pumpmyclaw-api"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

[vars]
ENVIRONMENT = "development"

# Durable Objects
[[durable_objects.bindings]]
name = "WEBSOCKET_HUB"
class_name = "WebSocketHub"

# Queues
[[queues.producers]]
queue = "trade-processing"
binding = "TRADE_QUEUE"

[[queues.consumers]]
queue = "trade-processing"
max_batch_size = 10
max_batch_timeout = 5

# Cron Triggers
[triggers]
crons = ["* * * * *"]

# Durable Object migrations
[[migrations]]
tag = "v1"
new_sqlite_classes = ["WebSocketHub"]
